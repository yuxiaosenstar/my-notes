(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{481:function(a,s,t){a.exports=t.p+"assets/img/16913101447905.ce4d66c6.jpg"},514:function(a,s,t){"use strict";t.r(s);var e=t(2),r=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("p",[a._v("在使用 node 时，如要用第三方库，可使用 npm install 命令安装。它会自动从网上的 npm 库中下载对应的包文件，比较方便。 有些情况下，或在有些公司中，开发环境无法直接连接外网,只能在离线环境下使用开发。就不能直接使用 npm 包管理工具通过网络下载安装依赖库。")]),a._v(" "),s("p",[a._v("这里介绍的方法是将依赖库制作成为一个 tar 文件，然后直接使用 npm install xxxx.tgz，离线安装这个依赖库文件。")]),a._v(" "),s("h2",{attrs:{id:"制作-tar-包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#制作-tar-包"}},[a._v("#")]),a._v(" 制作 tar 包")]),a._v(" "),s("p",[a._v("首先在有互联网连接的环境的情况制作依赖库的 tar 包，步骤如下：")]),a._v(" "),s("h3",{attrs:{id:"安装-npm-pack-all-工具"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装-npm-pack-all-工具"}},[a._v("#")]),a._v(" 安装 npm-pack-all 工具")]),a._v(" "),s("p",[a._v("npm-pack-all 可以将 npm 库文件打包为一个 tar 文件，访问 https://www.npmjs.com/package/npm-pack-all 了解更多。")]),a._v(" "),s("p",[a._v("执行下面命令安装它：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-g")]),a._v(" npm-pack-all\n")])])]),s("h3",{attrs:{id:"下载你要打包的库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#下载你要打包的库"}},[a._v("#")]),a._v(" 下载你要打包的库")]),a._v(" "),s("p",[a._v('一个 npm 库通常又会依赖其它的 npm 库。为了离线使用，它和它所有的依赖库都需要打包起来。我们现在以"selenium-webdriver"为例介绍在 Windows 操作系统上的打包过程。')]),a._v(" "),s("p",[a._v("这是一个自动化 web 网站常用的库，通常装在自动化脚本所在的本地目录。这里为了打包，需要全局安装。运行下面的命令全局安装这个库：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-g")]),a._v(" selenium-webdriver\n")])])]),s("p",[a._v("使用 -g 参数安装会自动把 selenium-webdriver 依赖的包放在全局目录下，即 "),s("code",[a._v("%userprofile%\\AppData\\Roaming\\npm")]),a._v(" 类似这样:")]),a._v(" "),s("p",[s("img",{attrs:{src:t(481),alt:""}})]),a._v(" "),s("p",[a._v("从上图中可以看到，全局安装的特点是，这个包的所有依赖包都安装在了自己的目录下的 node_modules 子目录里。")]),a._v(" "),s("h3",{attrs:{id:"制作-tgz-文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#制作-tgz-文件"}},[a._v("#")]),a._v(" 制作 tgz 文件")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("在命令行下，通过 cd %appdata%\\npm\\node_modules\\selenium-webdriver 调整当前目录到 selenium-webdriver 目录下。")])]),a._v(" "),s("li",[s("p",[a._v("执行 npm-pack-all")])]),a._v(" "),s("li",[s("p",[a._v("执行完毕后，会在当前目录下生成 .tgz 文件，这里生成的文件为 selenium-webdriver-4.0.0-alpha.5.tgz。根据你实际安装的 npm 包文件版本不同，这个文件有可能不同。")])])]),a._v(" "),s("h2",{attrs:{id:"离线安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#离线安装"}},[a._v("#")]),a._v(" 离线安装")]),a._v(" "),s("p",[a._v("将上一步生成的 .tgz 文件复制到离线的机器上，在你的项目目录下执行"),s("code",[a._v("npm install <your_tgz_file>")]),a._v("命令，安装这个包：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" selenium-webdriver-4.0.0-alpha.5.tgz\n")])])]),s("p",[a._v("即可将库文件安装成功。")]),a._v(" "),s("p",[a._v("有些 npm 包安装时会自动从网上下载更新，这时候离线安装需要带上一定的参数，否则可能会不成功。例如'chromedriver'，如安装离线包可以带上参数：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" chromedriver "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--chromedriver_skip_download")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("true\n")])])]),s("p",[a._v("具体参数及意义可参照 npm 包的文档（https://www.npmjs.com/package/chromedriver)。")])])}),[],!1,null,null,null);s.default=r.exports}}]);